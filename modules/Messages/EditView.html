<!--
/*********************************************************************************
 * The contents of this file are subject to the SugarCRM Public License Version
 * 1.1.3 ("License"); You may not use this file except in compliance with the
 * License. You may obtain a copy of the License at http://www.sugarcrm.com/SPL
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied.  See the License
 * for the specific language governing rights and limitations under the
 * License.
 *
 * All copies of the Covered Code must include on each user interface screen:
 *    (i) the "Powered by SugarCRM" logo and
 *    (ii) the SugarCRM copyright notice
 * in the same form as they appear in the distribution.  See full license for
 * requirements.
 *
 * The Original Code is: SugarCRM Open Source
 * The Initial Developer of the Original Code is SugarCRM, Inc.
 * Portions created by SugarCRM are Copyright (C) 2004-2006 SugarCRM, Inc.;
 * All Rights Reserved.
 * Contributor(s): ______________________________________.
 ********************************************************************************/
/*********************************************************************************
 * $Id: EditView.html,v 1.30 2006/08/27 10:33:08 majed Exp $
 ********************************************************************************/
-->
<!-- BEGIN: main -->
<script type="text/javascript" src="include/javascript/popup_parent_helper.js?s={SUGAR_VERSION}&c={JS_CUSTOM_VERSION}"></script>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr>
	<td style="padding-bottom: 2px;">
			<form name="EditView" method="POST" action="index.php" enctype="multipart/form-data">
			<input type="hidden" name="module" value="Messages">
			<input type="hidden" name="record" value="{ID}">
			<input type="hidden" name="action">
			<input type="hidden" name="return_module" value="{RETURN_MODULE}">
			<input type="hidden" name="return_id" value="{RETURN_ID}">
			<input type="hidden" name="return_action" value="{RETURN_ACTION}">
			<input type="hidden" name="parent_id" value="{PARENT_ID}">
			<input type="hidden" name="parent_type" value="{PARENT_TYPE}">
			<input type="hidden" name="parent_name" value="{PARENT_NAME}">
			<input title="{APP.LBL_SAVE_BUTTON_TITLE}" accessKey="{APP.LBL_SAVE_BUTTON_KEY}" class="button" onclick="this.form.action.value='Save'; status=verify_data(this.form);return status;" type="submit" name="button" value="  {APP.LBL_SAVE_BUTTON_LABEL}  " > <input title="{APP.LBL_CANCEL_BUTTON_TITLE}" accessKey="{APP.LBL_CANCEL_BUTTON_KEY}" class="button" onclick="this.form.action.value='{RETURN_ACTION}'; this.form.module.value='{RETURN_MODULE}'; this.form.record.value='{RETURN_ID}'" type="submit" name="button" value="  {APP.LBL_CANCEL_BUTTON_LABEL}  "></td>
	<td align="right" nowrap><span  class="required">{APP.LBL_REQUIRED_SYMBOL}</span> {APP.NTC_REQUIRED}</td>
	<td align='right'>{ADMIN_EDIT}</td>
	</tr>
</table>

<table width="100%" border="0" cellspacing="0" cellpadding="0"  class="tabForm">
<tr>
<td>
	<table width="100%" border="0" cellspacing="1" cellpadding="0">
	<!-- BEGIN: parent_name -->
	<tr>
        <td width="15%" class="dataLabel"><span sugar='slot1'>{LBL_PARENT_NAME}</span sugar='slot'></td>
        <td width="85%" colspan=3 class="dataField"><span sugar='slot1b'>{PARENT_NAME}</span sugar='slot'></td>
	</tr>
	<!-- END: parent_name -->
	<tr>
		<td width="15%" class="dataLabel"><span sugar='slot2'>{MOD.LBL_NAME}&nbsp;<span class="required">{APP.LBL_REQUIRED_SYMBOL}</span></span sugar='slot'></td>
		<td width="35%" class="dataField"><span sugar='slot2b'><input name='message_name' tabindex='1' type='text' size=40 value="{MESSAGE_NAME}"></span sugar='slot'></td>
		<td width="15%" class="dataLabel"><span sugar='slot2c'>{MOD.LBL_CATEGORY_VALUE}</span sugar='slot'></td>
		<td width="35%" class="dataField"><span sugar='slot2d'><select tabindex='1' name='category_id' onChange="checkMessageCategory(this)">{CATEGORY_OPTIONS}</select></span sugar='slot'></td>
	</tr>
	<tr>
        <td width="15%" class="dataLabel"><span>{MOD.LBL_FILENAME}&nbsp;</span sugar='slot'></td>
        <td width="35%" class="dataField"><span><input type="hidden" name="escaped_message_name"  size="20"><input name="uploadfile" tabindex='1' type={FILE_OR_HIDDEN} size="20" onchange="setvalue(this);"/> {FILENAME_TEXT}</span sugar='slot'></td>
		<td class="dataLabel"><span>{APP.LBL_ASSIGNED_TO}</span sugar='slot'></td>
		<td  class="dataField"><div id="USER_NAME"><span><input class="sqsEnabled" tabindex="1" autocomplete="off" id="assigned_user_name" name='assigned_user_name' type="text" value="{ASSIGNED_USER_NAME}"><input id='assigned_user_id' name='assigned_user_id' type="hidden" value="{ASSIGNED_USER_ID}" />
		<input title="{APP.LBL_SELECT_BUTTON_TITLE}" accessKey="{APP.LBL_SELECT_BUTTON_KEY}" type="button" tabindex='1' class="button" value='{APP.LBL_SELECT_BUTTON_LABEL}' name=btn1
			onclick='open_popup("Users", 600, 400, "", true, false, {encoded_users_popup_request_data});' /></span sugar='slot'></div>
		</td>
	</tr>
	<tr>
		<td class="dataLabel"><span>{MOD.LBL_MESSAGE_ACTIVE_DATE}&nbsp;<span class="required">{APP.LBL_REQUIRED_SYMBOL}</span></span sugar='slot'></td>
		<td class="dataLabel"><input onblur="parseDate(this, '{CALENDAR_DATEFORMAT}');" name='active_date' id='active_date_field' type="text" tabindex='1' size='11' value="{ACTIVE_DATE}"/> <img src="themes/{THEME}/images/jscalendar.gif" alt="{APP.LBL_ENTER_DATE}"  id="active_date_trigger" align="absmiddle"/> <span class="dateFormat">{USER_DATE_FORMAT}</span></td>
		<td class="dataLabel"><span>{MOD.LBL_MESSAGE_EXP_DATE}</span sugar='slot'></td>
		<td class="dataField"><span><input name='exp_date' id='exp_date_field' type="text" tabindex='2' size='11' maxlength='10' value="{EXP_DATE}"> <img src="themes/{THEME}/images/jscalendar.gif" alt="{APP.LBL_ENTER_DATE}"  id="exp_date_trigger" align="absmiddle"> <span class="dateFormat">{USER_DATE_FORMAT}</span></span sugar='slot'></td>
	</tr>
	<tr>
		<td valign="top" class="dataLabel"><span>{MOD.LBL_DOC_DESCRIPTION}</span sugar='slot'></td>
		<td colspan="3"  class="dataField"><span><textarea tabindex='3' name='description' tabindex='10' cols="120" rows="10">{DESCRIPTION}</textarea></span sugar='slot'></td>
	</tr>
	</table>
</td>
</tr>
</table>
<div style="padding-top: 2px">
	<input title="{APP.LBL_SAVE_BUTTON_TITLE}" accessKey="{APP.LBL_SAVE_BUTTON_KEY}" class="button" onclick="this.form.action.value='Save'; status=verify_data(this.form);return status;" type="submit" name="button" value="  {APP.LBL_SAVE_BUTTON_LABEL}  " > <input title="{APP.LBL_CANCEL_BUTTON_TITLE}" accessKey="{APP.LBL_CANCEL_BUTTON_KEY}" class="button" onclick="this.form.action.value='{RETURN_ACTION}'; this.form.module.value='{RETURN_MODULE}'; this.form.record.value='{RETURN_ID}'" type="submit" name="button" value="  {APP.LBL_CANCEL_BUTTON_LABEL}  ">
</div>
</form>
<script type="text/javascript" language="JavaScript">
	Calendar.setup ({
		inputField : "active_date_field", ifFormat : "{CALENDAR_DATEFORMAT}", showsTime : false, button : "active_date_trigger", singleClick : true, step : 1
	});

	Calendar.setup ({
		inputField : "exp_date_field", ifFormat : "{CALENDAR_DATEFORMAT}", showsTime : false, button : "exp_date_trigger", singleClick : true, step : 1
	});


	function setvalue(source) {
		src= new String(source.value);
		target=new String(source.form.message_name.value);

		if (target.length == 0) {
			lastindex=src.lastIndexOf("/");
			if (lastindex == -1) {
				lastindex=src.lastIndexOf("\\");
			}
			if (lastindex == -1) {
				source.form.message_name.value=src;
				source.form.escaped_message_name.value = src;
			} else {
				source.form.message_name.value=src.substr(++lastindex, src.length);
				source.form.escaped_message_name.value = src.substr(lastindex, src.length);
			}
		}
	}

	function checkMessageCategory(category)
	{
		var index = category.options.selectedIndex;
		var item = category.options[index].value;
		//alert("Index :"+index+" item :"+item);
		if(item == "User" || item == "AdminUser")
			document.getElementById("USER_NAME").style.display = "block";
		else
			document.getElementById("USER_NAME").style.display = "none";
	}

</script>



{JAVASCRIPT}
<!-- END: main -->
